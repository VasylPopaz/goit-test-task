{"version":3,"file":"static/js/535.f0643170.chunk.js","mappings":"sPACA,EAAyB,uBAAzB,EAA0D,wBAA1D,EAA0F,sBAA1F,EAAgI,8B,SC2EhI,EAhEe,WAAO,IAADA,EAAAC,EACnBC,GAA0DC,EAAAA,EAAAA,KAAlDC,EAASF,EAATE,UAAWC,EAAKH,EAALG,MAAOC,EAAaJ,EAAbI,cAAeC,EAAIL,EAAJK,KAAMC,EAAMN,EAANM,OAEzCC,GAAWC,EAAAA,EAAAA,MAEXC,GAAWC,EAAAA,EAAAA,MACXC,GAAeC,EAAAA,EAAAA,QAA2B,QAArBd,EAAe,QAAfC,EAACU,EAASI,aAAK,IAAAd,OAAA,EAAdA,EAAgBe,YAAI,IAAAhB,EAAAA,EAAI,KAC9CiB,GAAcH,EAAAA,EAAAA,QAAOP,GAErBW,EAAeX,EAAO,GAAKD,EAAca,QAE/CC,EAAAA,EAAAA,YAAU,WACJf,EAAMc,OAAS,GACjBV,GAASY,EAAAA,EAAAA,IAAS,CAAEC,OAAQ,CAAEf,KAAM,EAAGgB,MAAO,MAC3CC,SACAC,MAAK,WAAO,IACZC,OAAM,kBACLC,EAAAA,GAAAA,MAAY,iDAAiD,GAErE,GAAG,CAAClB,EAAUJ,EAAMc,UAEpBC,EAAAA,EAAAA,YAAU,WACR,GAAIH,EAAYW,UAAYrB,EAAM,CAChC,IAAMsB,EAAS,CACbP,OAAQ,CACNf,KAAAA,EACAgB,MAAO,IAGXd,GAASY,EAAAA,EAAAA,IAASQ,IACfL,SACAC,MAAK,WACJR,EAAYW,QAAUrB,CACxB,IACCmB,OAAM,kBACLC,EAAAA,GAAAA,MAAY,iDAAiD,GAEnE,CACF,GAAG,CAAClB,EAAUF,IAMd,OACEuB,EAAAA,EAAAA,MAAA,WAASC,UAAWC,EAASC,SAAA,EAC3BH,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAUC,SAAA,EACxBC,EAAAA,EAAAA,KAACC,EAAAA,GAAU,CAACC,GAAIvB,EAAae,WAC7BM,EAAAA,EAAAA,KAACG,EAAAA,GAAM,OAEP/B,EAAca,QAAWf,EAKvB,MAJF0B,EAAAA,EAAAA,MAAA,MAAIC,UAAWC,EAAQC,SAAA,CAAC,0BACCK,EAAAA,EAAAA,GAAe9B,GAAQ,4CAIlD0B,EAAAA,EAAAA,KAACK,EAAAA,GAAS,KACVT,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAgBC,SAAA,CAAC,IAAE7B,GAAY8B,EAAAA,EAAAA,KAACM,EAAAA,GAAM,IAAM,QAE3DtB,GAAegB,EAAAA,EAAAA,KAACO,EAAAA,GAAW,CAACC,QAnBL,WAC1BjC,GAASkC,EAAAA,EAAAA,MACX,IAiBoE,OAGtE,C","sources":["webpack://goit-test-task/./src/pages/Tweets/Tweets.module.css?3fe9","pages/Tweets/Tweets.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"tweets\":\"Tweets_tweets__2WkJR\",\"wrapper\":\"Tweets_wrapper__p5HEc\",\"title\":\"Tweets_title__1om6S\",\"loaderWrapper\":\"Tweets_loaderWrapper__AERoi\"};","import { useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n//\nimport { UsersList, LoadMoreBtn, GoBackLink, Filter, Loader } from 'components';\nimport { getUsers, increasePage } from 'storeRedux';\nimport { useUsers } from 'hooks';\nimport { getFilterValue } from 'helpers';\n//\nimport s from './Tweets.module.css';\n\nconst Tweets = () => {\n  const { isLoading, users, filteredUsers, page, filter } = useUsers();\n\n  const dispatch = useDispatch();\n\n  const location = useLocation();\n  const backLinkHref = useRef(location.state?.from ?? '/');\n  const prevPageRef = useRef(page);\n\n  const showLoadMore = page < 5 && filteredUsers.length;\n\n  useEffect(() => {\n    if (users.length < 3)\n      dispatch(getUsers({ params: { page: 1, limit: 3 } }))\n        .unwrap()\n        .then(() => {})\n        .catch(() =>\n          toast.error('Sorry, something went wrong. Please try again.')\n        );\n  }, [dispatch, users.length]);\n\n  useEffect(() => {\n    if (prevPageRef.current !== page) {\n      const config = {\n        params: {\n          page,\n          limit: 3,\n        },\n      };\n      dispatch(getUsers(config))\n        .unwrap()\n        .then(() => {\n          prevPageRef.current = page;\n        })\n        .catch(() =>\n          toast.error('Sorry, something went wrong. Please try again.')\n        );\n    }\n  }, [dispatch, page]);\n\n  const handleLoadMoreClick = () => {\n    dispatch(increasePage());\n  };\n\n  return (\n    <section className={s.tweets}>\n      <div className={s.wrapper}>\n        <GoBackLink to={backLinkHref.current} />\n        <Filter />\n      </div>\n      {!filteredUsers.length && !isLoading ? (\n        <h2 className={s.title}>\n          No users with status \"{getFilterValue(filter)}\". Try choosing another\n          filter value.\n        </h2>\n      ) : null}\n      <UsersList />\n      <div className={s.loaderWrapper}> {isLoading ? <Loader /> : null}</div>\n\n      {showLoadMore ? <LoadMoreBtn onClick={handleLoadMoreClick} /> : null}\n    </section>\n  );\n};\n\nexport default Tweets;\n"],"names":["_location$state$from","_location$state","_useUsers","useUsers","isLoading","users","filteredUsers","page","filter","dispatch","useDispatch","location","useLocation","backLinkHref","useRef","state","from","prevPageRef","showLoadMore","length","useEffect","getUsers","params","limit","unwrap","then","catch","toast","current","config","_jsxs","className","s","children","_jsx","GoBackLink","to","Filter","getFilterValue","UsersList","Loader","LoadMoreBtn","onClick","increasePage"],"sourceRoot":""}