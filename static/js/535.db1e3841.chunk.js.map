{"version":3,"file":"static/js/535.db1e3841.chunk.js","mappings":"sPACA,EAAyB,uBAAzB,EAA0D,wBAA1D,EAA0F,sBAA1F,EAA6H,2B,SCsF7H,EA3Ee,WAAO,IAADA,EAAAC,EACnBC,GAAiEC,EAAAA,EAAAA,KAAzDC,EAASF,EAATE,UAAWC,EAAKH,EAALG,MAAOC,EAAaJ,EAAbI,cAAeC,EAAIL,EAAJK,KAAMC,EAAMN,EAANM,OAAQC,EAAKP,EAALO,MAEjDC,GAAWC,EAAAA,EAAAA,MAEXC,GAAWC,EAAAA,EAAAA,MACXC,GAAeC,EAAAA,EAAAA,QAA2B,QAArBf,EAAe,QAAfC,EAACW,EAASI,aAAK,IAAAf,OAAA,EAAdA,EAAgBgB,YAAI,IAAAjB,EAAAA,EAAI,KAC9CkB,GAAcH,EAAAA,EAAAA,QAAOR,GAErBY,EAAeZ,EAAO,GAAKD,EAAcc,QAE/CC,EAAAA,EAAAA,YAAU,WACJhB,EAAMe,OAAS,GACjBV,GAASY,EAAAA,EAAAA,IAAS,CAAEC,OAAQ,CAAEhB,KAAM,EAAGiB,MAAO,MAC3CC,SACAC,MAAK,WAAO,IACZC,OAAM,kBACLC,EAAAA,GAAAA,MAAY,iDAAiD,GAErE,GAAG,CAAClB,EAAUL,EAAMe,UAEpBC,EAAAA,EAAAA,YAAU,WACR,GAAIH,EAAYW,UAAYtB,EAAM,CAChC,IAAMuB,EAAS,CACbP,OAAQ,CACNhB,KAAAA,EACAiB,MAAO,IAGXd,GAASY,EAAAA,EAAAA,IAASQ,IACfL,SACAC,MAAK,WACJR,EAAYW,QAAUtB,CACxB,IACCoB,OAAM,kBACLC,EAAAA,GAAAA,MAAY,iDAAiD,GAEnE,CACF,GAAG,CAAClB,EAAUH,IAMd,OACEwB,EAAAA,EAAAA,MAAA,WAASC,UAAWC,EAASC,SAAA,CAC1B9B,GAAY+B,EAAAA,EAAAA,KAACC,EAAAA,GAAM,IAAM,MAC1BD,EAAAA,EAAAA,KAAA,OAAKH,UAAS,YAAcE,SACzBzB,GACC0B,EAAAA,EAAAA,KAAA,MAAIH,UAAWC,EAAaC,SAAC,oDAI7BH,EAAAA,EAAAA,MAAAM,EAAAA,SAAA,CAAAH,SAAA,EACEH,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAUC,SAAA,EACxBC,EAAAA,EAAAA,KAACG,EAAAA,GAAU,CAACC,GAAIzB,EAAae,WAC7BM,EAAAA,EAAAA,KAACK,EAAAA,GAAM,OAEPlC,EAAcc,QAAWhB,EAKvB,MAJF2B,EAAAA,EAAAA,MAAA,MAAIC,UAAWC,EAAQC,SAAA,CAAC,0BACCO,EAAAA,EAAAA,GAAejC,GAAQ,4CAIlD2B,EAAAA,EAAAA,KAACO,EAAAA,GAAS,IACTvB,GACCgB,EAAAA,EAAAA,KAACQ,EAAAA,GAAW,CAACC,QA1BG,WAC1BlC,GAASmC,EAAAA,EAAAA,MACX,IAyBc,YAMhB,C","sources":["webpack://goit-test-task/./src/pages/Tweets/Tweets.module.css?3fe9","pages/Tweets/Tweets.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"tweets\":\"Tweets_tweets__2WkJR\",\"wrapper\":\"Tweets_wrapper__p5HEc\",\"title\":\"Tweets_title__1om6S\",\"errorTitle\":\"Tweets_errorTitle__ximR7\"};","import { useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n//\nimport { UsersList, LoadMoreBtn, GoBackLink, Filter, Loader } from 'components';\nimport { getUsers, increasePage } from 'storeRedux';\nimport { useUsers } from 'hooks';\nimport { getFilterValue } from 'helpers';\n//\nimport s from './Tweets.module.css';\n\nconst Tweets = () => {\n  const { isLoading, users, filteredUsers, page, filter, error } = useUsers();\n\n  const dispatch = useDispatch();\n\n  const location = useLocation();\n  const backLinkHref = useRef(location.state?.from ?? '/');\n  const prevPageRef = useRef(page);\n\n  const showLoadMore = page < 5 && filteredUsers.length;\n\n  useEffect(() => {\n    if (users.length < 3)\n      dispatch(getUsers({ params: { page: 1, limit: 3 } }))\n        .unwrap()\n        .then(() => {})\n        .catch(() =>\n          toast.error('Sorry, something went wrong. Please try again.')\n        );\n  }, [dispatch, users.length]);\n\n  useEffect(() => {\n    if (prevPageRef.current !== page) {\n      const config = {\n        params: {\n          page,\n          limit: 3,\n        },\n      };\n      dispatch(getUsers(config))\n        .unwrap()\n        .then(() => {\n          prevPageRef.current = page;\n        })\n        .catch(() =>\n          toast.error('Sorry, something went wrong. Please try again.')\n        );\n    }\n  }, [dispatch, page]);\n\n  const handleLoadMoreClick = () => {\n    dispatch(increasePage());\n  };\n\n  return (\n    <section className={s.tweets}>\n      {isLoading ? <Loader /> : null}\n      <div className={`container`}>\n        {error ? (\n          <h2 className={s.errorTitle}>\n            Sorry, something went wrong. Please try again.\n          </h2>\n        ) : (\n          <>\n            <div className={s.wrapper}>\n              <GoBackLink to={backLinkHref.current} />\n              <Filter />\n            </div>\n            {!filteredUsers.length && !isLoading ? (\n              <h2 className={s.title}>\n                No users with status \"{getFilterValue(filter)}\". Try choosing\n                another filter value.\n              </h2>\n            ) : null}\n            <UsersList />\n            {showLoadMore ? (\n              <LoadMoreBtn onClick={handleLoadMoreClick} />\n            ) : null}\n          </>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Tweets;\n"],"names":["_location$state$from","_location$state","_useUsers","useUsers","isLoading","users","filteredUsers","page","filter","error","dispatch","useDispatch","location","useLocation","backLinkHref","useRef","state","from","prevPageRef","showLoadMore","length","useEffect","getUsers","params","limit","unwrap","then","catch","toast","current","config","_jsxs","className","s","children","_jsx","Loader","_Fragment","GoBackLink","to","Filter","getFilterValue","UsersList","LoadMoreBtn","onClick","increasePage"],"sourceRoot":""}